{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:////Users/patrik.tolosa/node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:////Users/patrik.tolosa/node_modules/@babel/runtime/helpers/createClass.js","webpack:///external \"react\"","webpack:////Users/patrik.tolosa/node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack:////Users/patrik.tolosa/node_modules/@babel/runtime/helpers/typeof.js","webpack:////Users/patrik.tolosa/node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack:////Users/patrik.tolosa/node_modules/@babel/runtime/helpers/iterableToArray.js","webpack:////Users/patrik.tolosa/node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack:///./src/lib/ECS/util/entityLoop.js","webpack:///./src/lib/ECS/Group.js","webpack:///./src/lib/ECS/Entity.js","webpack:///./src/lib/CanvasAPI/CanvasAPI.js","webpack:///./src/lib/ObjectPool/ObjectPool.js","webpack:///./src/lib/GameCanvas/SelectedBox/SelectedBox.js","webpack:///./src/lib/GameCanvas/selectionUtils/isPosInsideCircle.js","webpack:///./src/lib/GameCanvas/selectionUtils/getShapesFromClick.js","webpack:///./src/lib/GameCanvas/selectionUtils/getShapesInSelectionBox.js","webpack:///./src/lib/GameCanvas/GameCanvas.js","webpack:///./src/lib/Engine/Engine.js","webpack:///./src/index.js"],"names":["root","factory","exports","module","require","define","amd","a","i","window","__WEBPACK_EXTERNAL_MODULE__2__","installedModules","__webpack_require__","m","instance","Constructor","TypeError","_defineProperties","target","props","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","arrayWithoutHoles","iterableToArray","nonIterableSpread","arr","_typeof2","obj","Symbol","iterator","constructor","_typeof","Array","isArray","arr2","iter","toString","call","from","entities","fn","ents","forEach","ent","push","keys","entID","Group","components","this","array","groups","reset","generateGroupKey","names","count","name","map","x","toLowerCase","sort","join","getGroup","indexGroup","group","compArray","reduce","entityLoop","entity","hasComponents","id","spliceOne","idx","len","Entity","classRef","counter","component","compName","groupKey","indexOf","assignGroup","newGroup","copyArray","extendGroup","comp","compInGroup","entHasReqComps","removeComponent","agg","getByComps","type","compNames","concat","destroy","Shape","draw","metaData","ObjectPool","PooledClass","incrementWhenEmpty","freePool","stats","free","used","amount","generate","pop","object","CanvasAPI","ctx","strokeStyle","layers","initial","shapes","Map","defaultStrokeStyle","originCanvas","canvas","parentNode","newCanvas","cloneNode","insertBefore","getContext","querySelector","remove","layerName","layer","clear","image","y","height","width","cropStartX","cropStartY","cropSizeX","cropSizeY","rotation","set","beginPath","save","translate","rotate","drawImage","restore","closePath","drawFn","lineWidth","rect","stroke","direction","size","color","fillColor","radius","startArc","endArc","arc","Math","PI","fillStyle","fill","moveTo","panX","panY","setTransform","text","font","textBaseline","fillText","clearRect","values","SelectedBox","start","end","assign","getWidth","getHeight","isPosInsideCircle","centerX","centerY","pow","getShapesFromClick","hits","shape","shapeMetaData","shapeX","shapeY","getShapesInSelectionBox","selectedData","minX","min","maxX","max","minY","maxY","GameCanvas","options","selectedBoxColor","mapHeight","mapWidth","viewHeight","viewWidth","onViewMapClick","onViewMapMove","onMiniMapClick","onMiniMapMove","lastClick","dbClick","lastTap","selectedBox","updateViewMapCursorPosition","bind","updateMiniMapCursorPosition","handleMapMouseUp","handleMapMouseDown","handleMiniMapClick","handleMiniMapMove","handleMapMouseMove","handleMapMouseLeave","handleTouchMove","handleTouchStart","handleMapTouchEnd","handleMiniMapTouchStart","event","canvasAPI","getBoundingClientRect","clientX","left","clientY","top","round","getPan","isMouseDown","setEnd","viewMapX","viewMapY","data","getData","mapAPI","addRect","dbTap","updateCursorPosition","viewMapCanvas","miniMapCanvas","miniMapAPI","miniMapX","miniMapY","getMapRef","getMiniRef","generateMapCanvas","minimap","generateMiniMapCanvas","calcPanX","calcPanY","pan","updateMiniMapSquare","now","Date","getTime","setSelectBox","setStart","e","touches","preventDefault","getRef","className","ref","el","document","removeEventListener","addEventListener","onMouseDown","onTouchStart","onTouchEnd","onMouseMove","onMouseUp","onMouseLeave","setInterval","clearInterval","Engine","systems","frameID","system","sysArgs","requestAnimationFrame","systemArguments","runSystems","run","cancelAnimationFrame","c","d","getter","o","get","r","toStringTag","value","t","mode","__esModule","ns","create","n","property","hasOwnProperty","p","s","moduleId","l","modules"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"react\")) : factory(root[\"react\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function(__WEBPACK_EXTERNAL_MODULE__2__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;","/**\n * used to loop over and possibly filter entities\n * Accepts either a map of Entities with EntitiyID as Key, or an array\n * if the CB returns true, an array of entities that return true is returned.\n * @param entities\n * @param fn\n * @returns {Array}\n */\nexport default (entities, fn) => {\n  let ents = [];\n\n  if (entities.forEach) {\n    entities.forEach((ent) => {\n      fn(ent) && ents.push(ent);\n    });\n  } else {\n    Object.keys(entities).forEach((entID) => {\n      fn(entities[entID]) && ents.push(entities[entID]);\n    });\n  }\n\n  return ents;\n};","import entityLoop from './util/entityLoop';\n\n\nclass Group {\n  constructor(components, entities = {}) {\n    this.components = components;\n    this.entities = entities;\n    this.array = [];\n  }\n}\n\nGroup.groups = {};\n\nGroup.reset = () => {\n  Group.groups = {};\n};\n\nGroup.generateGroupKey = (components) => {\n  let names = [];\n  for (let count = 0; count < components.length; count++) {\n    let name = components[count];\n    names.push(name);\n  }\n\n  return names\n    .map((x) => {\n      return x.toLowerCase();\n    })\n    .sort()\n    .join('-');\n};\n\nGroup.getGroup = (components) => {\n  let key = Group.generateGroupKey(components);\n  return Group.groups[key] || {};\n};\n\n// this will create a new index group for the provided components.\nGroup.indexGroup = (components, entities) => {\n  let compArray = components.reduce ? components : [components];\n\n  let key = Group.generateGroupKey(compArray);\n\n  let group;\n\n  if (Group.groups[key]) {\n    return;\n  } else {\n    group = Group.groups[key] = new Group(compArray);\n  }\n\n  // insert the provided entities into this group...\n  entityLoop(entities, (entity) => {\n    if (entity.hasComponents(compArray)) {\n      group.entities[entity.id] = entity;\n      group.array = [...group.array, entity];\n    }\n  });\n\n  return group;\n};\n\nexport default Group;\n\n// life cycle of a group!\n\n// 1. Adding a component adds a group with that one component.\n// 2. Adding 2nd component creates a group with that 2nd component\n// 3. Querying for a list of components should create an group for that list, one off.\n// 4. Adding and removing components will update the above lists as needed.","import Group from './Group';\nimport entityLoop from './util/entityLoop';\n\nexport let spliceOne = function(arr, index = 0) {\n  let idx = index;\n  let len = arr.length;\n  if (!len || idx >= len) {\n    return;\n  }\n\n  while (idx < len) {\n    arr[idx] = arr[idx + 1];\n    idx++;\n  }\n  arr.length--;\n};\n\n\n/**\n * Entity class to a static interface\n *\n * entity.addComponent(Component component)\n *\n */\n\n\nclass Entity {\n  constructor(classRef) {\n    Entity.counter++;\n    this.id = Entity.counter;\n    this.constructor = classRef;\n    this.components = {};\n    Entity.entities[this.id] = this;\n  }\n\n  assignGroup(group) {\n    group.entities[this.id] = this;\n  }\n\n  // A component is added\n  // we create a new group index, for exm\n  addComponent(component) {\n    this.components[component.name] = component;\n    this[component.name] = component;\n    // creates an index group if it does not exist..\n\n    let arr = [];\n    for (let compName in this.components) {\n      arr.push(compName);\n    }\n    Group.indexGroup(arr, Entity.entities);\n\n    // we need to see if we need to add entity into other groups.\n    for (let groupKey in Group.groups) {\n      let group = Group.groups[groupKey];\n      // if the ent is in this group, skip.\n      if (group.entities[this.id]) {\n        continue;\n      }\n      // if the component is not in this group, skip.\n      if (group.components.indexOf(component.name) === -1) {\n        continue;\n      }\n      // if this ent does not have all the other comps, skip..\n      if (this.hasComponents(group.components)) {\n        this.assignGroup(group);\n        let newGroup = this.copyArray(group);\n        group.array = this.extendGroup(newGroup);\n      }\n    }\n  }\n\n  // that's not really copying the array now is it?\n  copyArray(group) {\n    return group.array;\n  }\n\n  extendGroup(newGroup) {\n    newGroup[newGroup.length] = this;\n    return newGroup;\n  }\n\n  // mixed, an actual component or just component name\n  removeComponent(comp) {\n    let component = this.components[comp] || comp;\n    let compName = component.name;\n\n    // we need to see if we need to remove entity from other groups\n    for (let groupKey in Group.groups) {\n      let group = Group.groups[groupKey];\n      // if the ent is in this group, skip.\n\n      let compInGroup = group.components.indexOf(component.name) > -1;\n      let entHasReqComps = this.hasComponents(group.components);\n\n      // if this ent does not have all the other comps, skip..\n      if (group.entities[this.id] && compInGroup && entHasReqComps) {\n        delete group.entities[this.id];\n        spliceOne(group.array, group.array.indexOf(this));\n      }\n    }\n\n    delete this.components[compName];\n    delete this[compName];\n  }\n\n  /**\n   * Destroying an entity means removing all its components and deleting it from the Entity Object\n   */\n  destroy() {\n    Object.keys(this.components).forEach((compName) => {\n      this.removeComponent(this.components[compName]);\n    });\n    delete Entity.entities[this.id];\n  }\n\n  hasComponents(components = []) {\n    // quick breakout\n    if (this.components[components]) {\n      return true;\n    }\n\n    let compNames = components.reduce ? components : [components];\n\n    return compNames.reduce((agg, compName) => {\n      return agg && !!this.components[compName];\n    }, true);\n  }\n}\n\nEntity.entities = {};\n\n/**\n * @param components\n * @param type 'array'|'map'\n * @return return array/map\n */\nEntity.getByComps = (components, type = 'array') => {\n  let compNames = components.reduce ? components : [components];\n  Group.indexGroup(components, Entity.entities);\n  let group = Group.getGroup(compNames);\n  return type === 'map' ? group.entities : group.array.concat();\n};\n\nEntity.reset = () => {\n  entityLoop(Entity.entities, (entity) => {\n    entity.destroy();\n  });\n  Group.reset();\n};\n\nEntity.counter = 0;\n\nwindow.Entity = Entity;\nexport default Entity;","/**\n * Library for working with Canvas,\n * Works by using a 2D context as an argument\n * Provides abstraction for some common shapes in Canvas\n */\n\n\nexport class Shape {\n  constructor(draw, metaData) {\n    this.draw = draw;\n    this.metaData = metaData;\n  }\n}\n\nclass CanvasAPI {\n  constructor(ctx, strokeStyle = 'white') {\n    this.layers = {\n      initial: {\n        ctx,\n        shapes: new Map()\n      }\n    };\n\n    this.defaultStrokeStyle = strokeStyle;\n    ctx.strokeStyle = strokeStyle;\n  }\n\n  addLayer(name) {\n    if (!this.layers.initial.ctx) {\n      throw 'Cannot create layer, no initial context found';\n    } else {\n      let originCanvas = this.layers.initial.ctx.canvas;\n\n      let parentNode = originCanvas.parentNode;\n      let newCanvas = originCanvas.cloneNode();\n\n      newCanvas.id = name;\n      parentNode.insertBefore(newCanvas, originCanvas);\n\n      this.layers[name] = {\n        ctx: newCanvas.getContext('2d'),\n        shapes: new Map()\n      };\n    }\n  }\n\n  removeLayer(name) {\n    let originCanvas = this.layers.initial.ctx.canvas;\n    let parentNode = originCanvas.parentNode;\n\n    parentNode.querySelector(`#${name}`).remove();\n    delete this.layers[name];\n  }\n\n  /**\n   * Clears all the shapes\n   */\n  clear(layerName = 'initial') {\n    let layer = this.layers[layerName];\n    let ctx = layer.ctx;\n    layer.shapes = new Map();\n  }\n\n  clearAllLayers() {\n    for (let layerName in this.layers) {\n      this.clear(layerName);\n    }\n  }\n\n  /**\n   * Removes a shape by its ID\n   * @param id\n   * @param layerName\n   */\n  remove(id, layerName = 'initial') {\n    let layer = this.layers[layerName];\n    let ctx = layer.ctx;\n    let shapes = layer.shapes;\n    shapes.delete(id);\n  }\n\n  /* istanbul ignore next */\n  addImage({\n    id,\n    image, // the image to display\n    x, y, // pos for x,y..\n    height, width,\n    cropStartX, cropStartY, cropSizeX, cropSizeY,\n    rotation // in radians\n  }, layerName = 'initial') {\n    let layer = this.layers[layerName];\n    let ctx = layer.ctx;\n    let shapes = layer.shapes;\n\n    shapes.set(id, new Shape(() => {\n      ctx.beginPath();\n      ctx.save();\n      ctx.translate(x + width / 2, y + height / 2);\n      ctx.rotate(rotation);\n      ctx.drawImage(image,\n        cropStartX, cropStartY, cropSizeX, cropSizeY,\n        -width / 2, -height / 2,  // pos in canvas // at the top left of the canvas\n        width, height); // size in canvas\n      ctx.restore();\n      ctx.closePath();\n    }, {\n      id,\n      type: 'image',\n      x,\n      y,\n      height,\n      width\n    }));\n  }\n\n  // TODO Finish this API\n  addShape({id, drawFn, layerName = 'initial'}) {\n    let layer = this.layers[layerName];\n    let ctx = layer.ctx;\n    let shapes = layer.shapes;\n\n    shapes.set(id, new Shape(() => {\n      drawFn(ctx);\n    }));\n  }\n\n  addRect({id, x, y, width, height, strokeStyle, lineWidth}, layerName = 'initial') {\n    let layer = this.layers[layerName];\n    let ctx = layer.ctx;\n    let shapes = layer.shapes;\n\n    shapes.set(id, new Shape(() => {\n      ctx.strokeStyle = strokeStyle;\n      ctx.lineWidth = lineWidth;\n      ctx.beginPath();\n      ctx.rect(\n        x,\n        y,\n        width,\n        height\n      );\n      ctx.stroke();\n      ctx.closePath();\n    }, {\n      id,\n      type: 'rect',\n      x,\n      y,\n      height,\n      width\n    }));\n  }\n\n  addArc({id, direction, size, color = 'black', fillColor, lineWidth = 1, x, y, radius, layerName = 'initial'}) {\n    let layer = this.layers[layerName];\n    let ctx = layer.ctx;\n    let shapes = layer.shapes;\n\n    shapes.set(id, new Shape(() => {\n      ctx.strokeStyle = color;\n      ctx.lineWidth = lineWidth;\n\n      let startArc = direction - (size / 2);\n      let endArc = direction + (size / 2);\n\n      ctx.beginPath();\n      ctx.arc(x, y, radius, startArc * Math.PI, endArc * Math.PI);\n      if (fillColor) {\n        ctx.fillStyle = fillColor;\n        ctx.fill();\n      }\n      ctx.stroke();\n      ctx.closePath();\n    }));\n  }\n\n  addCircle({id, x, y, radius, strokeStyle, lineWidth, fillColor}, layerName = 'initial') {\n    let layer = this.layers[layerName];\n    let ctx = layer.ctx;\n    let shapes = layer.shapes;\n\n    shapes.set(id, new Shape(() => {\n      ctx.strokeStyle = strokeStyle;\n      ctx.lineWidth = lineWidth;\n      ctx.moveTo(x, y);\n      ctx.beginPath();\n      ctx.arc(x, y, radius, 0, Math.PI * 2);\n      if (fillColor) {\n        ctx.fillStyle = fillColor;\n        ctx.fill();\n      }\n      ctx.stroke();\n      ctx.closePath();\n    }, {\n      id,\n      type: 'circle',\n      x,\n      y,\n      radius\n    }));\n  }\n\n  /**\n   * Method allows us to pan around the canvas\n   */\n  pan(x, y) {\n    this.panX = x;\n    this.panY = y;\n\n    for (let layerName in this.layers) {\n      let layer = this.layers[layerName];\n      let ctx = layer.ctx;\n      ctx.setTransform(1, 0, 0, 1, x, y);\n\n      // non initial layers are drawn much less often, so we need a manual one here.\n      if (layerName !== 'initial') {\n        this.draw(layerName); // pan requires a draw to all non initial layers\n      }\n    }\n  }\n\n  getPan() {\n    return {\n      panX: this.panX || 0,\n      panY: this.panY || 0\n    };\n  }\n\n  write({id, text, x, y, font, textBaseline, fillStyle}, layerName = 'initial') {\n    let layer = this.layers[layerName];\n    let ctx = layer.ctx;\n    let shapes = layer.shapes;\n\n    shapes.set(id, new Shape(() => {\n      ctx.beginPath();\n      ctx.font = font;\n      ctx.textBaseline = textBaseline;\n      ctx.fillStyle = fillStyle;\n      ctx.fillText(text, x, y);\n      ctx.closePath();\n    }, {\n      id,\n      x,\n      y\n    }));\n  }\n\n  draw(layerName = 'initial') {\n    let layer = this.layers[layerName];\n    let ctx = layer.ctx;\n    let shapes = layer.shapes;\n\n    ctx.save();\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n    ctx.restore();\n\n    for (let shape of shapes.values()) {\n      shape.draw();\n      ctx.strokeStyle = this.defaultStrokeStyle;\n    }\n  }\n}\n\n// adding an image causes segmentation fault for some reason :)\n/* istanbul ignore next */\nif (process.env.NODE_ENV === 'test') {\n  CanvasAPI.prototype.addImage = () => {\n  };\n}\nexport default CanvasAPI;","class ObjectPool {\n  constructor(PooledClass, incrementWhenEmpty = 10) {\n    this.type = PooledClass;\n    this.freePool = [];\n    this.stats = {\n      free: 0,\n      used: 0\n    };\n    this.incrementWhenEmpty = incrementWhenEmpty;\n  }\n\n  reset() {\n    this.freePool = [];\n    this.stats = {\n      free: 0,\n      used: 0\n    };\n  }\n\n  // Ensures the pool has at least $amount of free objects\n  generate(amount) {\n    let count = amount - this.stats.free > 0 ? amount - this.stats.free : 0;\n    // generate a gazzilion fighters?\n    while (count > 0) {\n      this.freePool.push(new this.type());\n      count--;\n    }\n    this.stats.free = this.freePool.length;\n  }\n\n  // acquires an object, marks it as 'used'.\n  acquire() {\n    if (this.freePool.length === 0) {\n      this.generate(this.incrementWhenEmpty);\n    }\n    let obj = this.freePool.pop();\n    this.stats.free = this.freePool.length;\n    return obj;\n  }\n\n  // releases an object, marks it as free\n  release(object) {\n    // prevent release twice\n    if (this.freePool.indexOf(object) === -1) {\n      this.freePool.push(object);\n      this.stats.free = this.freePool.length;\n    }\n  }\n}\n\nexport default ObjectPool;","/**\n * Class that represents the current selected area by the user\n * Populated when the user click, holds and move the mouse\n */\nclass SelectedBox {\n  constructor() {\n    this.reset();\n  }\n\n  reset() {\n    this.start = {\n      x: 0,\n      y: 0\n    };\n    this.end = {\n      x: 0,\n      y: 0\n    };\n  }\n\n  getData() {\n    return {\n      start : Object.assign({}, this.start),\n      end : Object.assign({}, this.end),\n      width : this.getWidth(),\n      height : this.getHeight()\n    };\n  }\n\n  getHeight() {\n    return this.end.y - this.start.y;\n  }\n\n  getWidth() {\n    return this.end.x - this.start.x;\n  }\n\n  setStart(x, y) {\n    this.start.x = x;\n    this.start.y = y;\n  }\n\n  setEnd(x, y) {\n    this.end.x = x;\n    this.end.y = y;\n  }\n}\n\nexport default SelectedBox;","/**\n * Utility function to detect if a point is inside a circle\n * @param x\n * @param y\n * @param centerX\n * @param centerY\n * @param radius\n * @return {boolean}\n */\nfunction isPosInsideCircle(x, y, centerX, centerY, radius) {\n  return Math.pow((x - centerX), 2) + Math.pow((y - centerY), 2) < Math.pow(radius, 2);\n}\n\nexport default isPosInsideCircle;","import isPosInsideCircle from './isPosInsideCircle';\n\n\n/**\n * Function used for getting all shapes hit from a single click (not from a selection box)\n */\nfunction getShapesFromClick(shapes, x, y) {\n  let hits = [];\n\n  shapes.forEach((shape, id) => {\n    let shapeMetaData = shape.metaData;\n    let shapeX      = shapeMetaData.x;\n    let shapeY      = shapeMetaData.y;\n    let radius = shapeMetaData.radius;\n    let type   = shapeMetaData.type;\n\n\n    if (type === 'circle' && isPosInsideCircle(x, y, shapeX, shapeY, radius)) {\n      hits.push(id);\n    } else if (type !== 'circle') {\n      // do nothing, no support for non circles\n    }\n  });\n\n  return hits;\n}\n\nexport default getShapesFromClick;","function getShapesInSelectionBox(shapes, selectedData) {\n  let minX = Math.min(selectedData.start.x, selectedData.end.x);\n  let maxX = Math.max(selectedData.start.x, selectedData.end.x);\n  let minY = Math.min(selectedData.start.y, selectedData.end.y);\n  let maxY = Math.max(selectedData.start.y, selectedData.end.y);\n\n\n  let hits = [];\n  shapes.forEach((shape, id) => {\n    let shapeMetaData = shape.metaData;\n    let shapeX      = shapeMetaData.x;\n    let shapeY      = shapeMetaData.y;\n    let type   = shapeMetaData.type;\n\n    if (type === 'circle') {\n      let centerX = shapeX;\n      let centerY = shapeY;\n      if (centerX >= minX && centerX <= maxX && centerY >= minY && centerY <= maxY) {\n        hits.push(id);\n      }\n    } else {\n      // do nothing, no support for non circles\n    }\n  });\n\n  return hits;\n}\n\nexport default getShapesInSelectionBox;","import React from 'react';\nimport CanvasAPI from 'lib/CanvasAPI/CanvasAPI';\nimport SelectedBox from './SelectedBox/SelectedBox';\nimport getShapesFromClick from './selectionUtils/getShapesFromClick';\nimport getShapesInSelectionBox from './selectionUtils/getShapesInSelectionBox';\n\nclass GameCanvas {\n  constructor(options) {\n    this.selectedBoxColor = options.selectedBoxColor || 'blue';\n    this.mapHeight = options.mapHeight;\n    this.mapWidth = options.mapWidth;\n    this.viewHeight = options.viewHeight;\n    this.viewWidth = options.viewWidth;\n    this.onViewMapClick = options.onViewMapClick;\n    this.onViewMapMove = options.onViewMapMove;\n  \n    this.onMiniMapClick = options.onMiniMapClick;\n    this.onMiniMapMove = options.onMiniMapMove;\n    \n    this.lastClick = 0;\n    this.dbClick = false;\n    this.lastTap = 0;\n    this.lastClick = false;\n    this.selectedBox = new SelectedBox();\n    this.updateViewMapCursorPosition = this.updateViewMapCursorPosition.bind(this);\n    this.updateMiniMapCursorPosition = this.updateMiniMapCursorPosition.bind(this);\n    this.handleMapMouseUp = this.handleMapMouseUp.bind(this);\n    this.handleMapMouseDown = this.handleMapMouseDown.bind(this);\n    this.handleMiniMapClick = this.handleMiniMapClick.bind(this);\n    this.handleMiniMapMove = this.handleMiniMapMove.bind(this);\n    this.handleMapMouseMove = this.handleMapMouseMove.bind(this);\n    this.handleMapMouseLeave = this.handleMapMouseLeave.bind(this);\n    this.handleTouchMove = this.handleTouchMove.bind(this);\n    this.handleTouchStart = this.handleTouchStart.bind(this);\n    this.handleMapTouchEnd = this.handleMapTouchEnd.bind(this);\n    this.handleMiniMapTouchStart = this.handleMiniMapTouchStart.bind(this);\n  }\n\n  updateCursorPosition(event, canvas, canvasAPI) {\n    let rect = canvas.getBoundingClientRect();\n    // base position\n    let x = event.clientX - rect.left;\n    let y = event.clientY - rect.top;\n\n    x = Math.max(0, Math.round(x * (canvas.width / rect.width))) - canvasAPI.getPan().panX;\n    y = Math.max(0, Math.round(y * (canvas.height / rect.height))) - canvasAPI.getPan().panY;\n\n    return {x, y};\n  }\n\n  handleMapMouseMove() {\n    if (this.isMouseDown) {\n      this.selectedBox.setEnd(this.viewMapX, this.viewMapY);\n\n      let data = this.selectedBox.getData();\n\n      this.mapAPI.addRect({\n        id: 'selectedBox',\n        x: data.start.x,\n        y: data.start.y,\n        width: data.width,\n        height: data.height,\n        strokeStyle: this.selectedBoxColor\n      });\n    }\n\n    this.onViewMapMove({\n      x: this.viewMapX,\n      y: this.viewMapY,\n      isMouseDown: this.isMouseDown,\n      dbClick: this.dbClick,\n      selectedBox: this.selectedBox.getData()\n    });\n  }\n\n  handleMapMouseLeave() {\n    if (this.isMouseDown) {\n      this.handleMapMouseUp();\n    }\n  }\n\n  handleMapTouchEnd() {\n    this.isMouseDown = false;\n\n    let selectedData = this.selectedBox.getData();\n\n    let hits = [];\n    // if a single click...\n    if (selectedData.end.x === selectedData.start.x) {\n      let x = selectedData.end.x;\n      let y = selectedData.end.y;\n      hits = getShapesFromClick(this.mapAPI.layers.initial.shapes, x, y);\n    } else {\n      hits = getShapesInSelectionBox(this.mapAPI.layers.initial.shapes, selectedData);\n    }\n\n    this.mapAPI.addRect({\n      id: 'selectedBox',\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0\n    });\n\n    this.onViewMapClick({\n      x: this.viewMapX,\n      y: this.viewMapY,\n      isMouseDown: this.isMouseDown,\n      dbClick: this.dbTap || this.dbClick,\n      selectedBox: selectedData,\n      hits\n    });\n    this.selectedBox.reset();\n  }\n\n  handleMapMouseUp() {\n    if (!this.lastTap) {\n      this.handleMapTouchEnd();\n    }\n  }\n\n\n  updateViewMapCursorPosition(event) {\n    let {x, y} = this.updateCursorPosition(event, this.viewMapCanvas, this.mapAPI);\n    this.viewMapX = x;\n    this.viewMapY = y;\n  }\n\n  updateMiniMapCursorPosition(event) {\n    let {x, y} = this.updateCursorPosition(event, this.miniMapCanvas, this.miniMapAPI);\n    this.miniMapX = x;\n    this.miniMapY = y;\n  }\n\n  getNewCanvasPairs({getMapRef, getMiniRef}) {\n    return {\n      map: this.generateMapCanvas(getMapRef),\n      minimap: this.generateMiniMapCanvas(getMiniRef)\n    };\n  }\n\n  handleMiniMapMove(event) {\n    this.onMiniMapMove(event);\n  }\n  \n  handleMiniMapClick(event) {\n    let x = this.miniMapX;\n    let y = this.miniMapY;\n    // Handle negative overflows, both numbers should be positive\n    // the reason we divide in 2 is because we want to center the view\n    let calcPanX = Math.max(x - this.viewWidth / 2, 0);\n    let calcPanY = Math.max(y - this.viewHeight / 2, 0);\n\n    // Handle positive overflows, both numbers should not exceed map size\n    let width = this.mapWidth;\n    let height = this.mapHeight;\n\n    calcPanX = calcPanX + this.viewWidth < width ? calcPanX : width - this.viewWidth;\n    calcPanY = calcPanY + this.viewHeight < height ? calcPanY : height - this.viewHeight;\n\n    this.mapAPI.pan(-calcPanX, -calcPanY);\n\n    // draw the minimap square box\n    this.updateMiniMapSquare();\n    this.onMiniMapClick(event);\n  }\n\n  updateMiniMapSquare() {\n    this.miniMapAPI.addRect({\n      id: 'currentMap',\n      x: -this.mapAPI.getPan().panX,\n      y: -this.mapAPI.getPan().panY,\n      width: this.viewWidth,\n      height: this.viewHeight,\n      strokeStyle: 'green',\n      lineWidth: 20\n    });\n  }\n\n  handleMapMouseDown() {\n    if (!this.lastTap) {\n      let now = new Date().getTime();\n      this.dbClick = (now - this.lastClick) < 300;\n      this.lastClick = now;\n      this.isMouseDown = true;\n      this.setSelectBox();\n    }\n  }\n\n  setSelectBox() {\n    this.selectedBox.setStart(this.viewMapX, this.viewMapY);\n    this.selectedBox.setEnd(this.viewMapX, this.viewMapY);\n  }\n\n  handleTouchStart(e) {\n    let {x, y} = this.updateCursorPosition(e.touches[0], this.viewMapCanvas, this.mapAPI);\n    let now = new Date().getTime();\n\n    this.dbTap = (now - this.lastTap) < 300;\n    this.lastTap = now;\n\n    this.viewMapX = x;\n    this.viewMapY = y;\n\n    this.setSelectBox();\n  }\n\n  handleMiniMapTouchStart(e) {\n    let {x, y} = this.updateCursorPosition(e.touches[0], this.miniMapCanvas, this.miniMapAPI);\n\n    this.miniMapX = x;\n    this.miniMapY = y;\n\n    this.handleMiniMapClick();\n  }\n\n\n  handleTouchMove(e) {\n    e.preventDefault();\n    let {x, y} = this.updateCursorPosition(e.touches[0], this.viewMapCanvas, this.mapAPI);\n\n    let calcPanX;\n    let calcPanY;\n    let {panX, panY} = this.mapAPI.getPan();\n\n    let xMoved = x - this.viewMapX;\n    let yMoved = y - this.viewMapY;\n\n    calcPanX = panX + xMoved;\n    calcPanY = panY + yMoved;\n\n    // both numbers should be negative\n    calcPanX = Math.min(calcPanX, 0);\n    calcPanY = Math.min(calcPanY, 0);\n\n    // the panning + the mapSize, should not exceed the viewSize\n    let width = this.mapWidth;\n    let height = this.mapHeight;\n    calcPanX = -calcPanX + this.viewWidth < width ? calcPanX : this.viewWidth - width;\n    calcPanY = -calcPanY + this.viewHeight < height ? calcPanY : this.viewHeight - height;\n\n    this.mapAPI.pan(calcPanX, calcPanY);\n  }\n\n  generateMapCanvas(getRef) {\n    return (\n      <canvas\n        className='viewMap'\n        ref={(el) => {\n          if (!el) {\n            return null;\n          }\n          \n          if (process.env.NODE_ENV === 'test' && !el.removeEventListener) {\n            el = el._reactInternalFiber.child.stateNode; // eslint-disable-line\n          }\n\n          this.viewMapCanvas = el;\n          document.removeEventListener('mousemove', this.updateViewMapCursorPosition);\n          document.addEventListener('mousemove', this.updateViewMapCursorPosition);\n          el.removeEventListener('touchmove', this.handleTouchMove, false);\n          el.addEventListener('touchmove', this.handleTouchMove, false);\n\n          this.mapAPI = new CanvasAPI(el.getContext('2d'));\n          getRef(this.mapAPI, el);\n        }}\n        height={this.viewHeight}\n        width={this.viewWidth}\n        onMouseDown={this.handleMapMouseDown}\n        onTouchStart={this.handleTouchStart}\n        onTouchEnd={this.handleMapTouchEnd}\n        onMouseMove={this.handleMapMouseMove}\n        onMouseUp={this.handleMapMouseUp}\n        onMouseLeave={this.handleMapMouseLeave}\n      ></canvas>\n    );\n  }\n\n  generateMiniMapCanvas(getRef) {\n    return (\n      <canvas\n        className='minimap'\n        ref={(el) => {\n          if (!el) {\n            return null;\n          }\n  \n          if (process.env.NODE_ENV === 'test' && !el.removeEventListener) {\n            el = el._reactInternalFiber.child.stateNode; // eslint-disable-line\n          }\n          \n          this.miniMapCanvas = el;\n          document.removeEventListener('mousemove', this.updateMiniMapCursorPosition);\n          document.addEventListener('mousemove', this.updateMiniMapCursorPosition);\n\n          this.miniMapAPI = new CanvasAPI(el.getContext('2d'));\n\n          // TODO - what? why? is this needed?\n          let key = setInterval(() => {\n            if (this.mapAPI) {\n              this.updateMiniMapSquare();\n              clearInterval(key);\n            }\n          }, 100);\n\n          getRef(this.miniMapAPI, el);\n        }}\n        height={this.mapHeight}\n        width={this.mapWidth}\n        onMouseMove={this.handleMiniMapMove}\n        onMouseDown={this.handleMiniMapClick}\n        onTouchStart={this.handleMiniMapTouchStart}\n      ></canvas>\n    );\n  }\n}\n\nexport default GameCanvas;","class Engine {\n  constructor() {\n    this.systems = [];\n    this.frameID = null;\n  }\n\n  addSystem(system) {\n    this.systems.push(system);\n  }\n\n  run(sysArgs) {\n    this.frameID = requestAnimationFrame(() => {\n      let systemArguments = typeof sysArgs === 'function' ? sysArgs() : sysArgs;\n\n      if (typeof systemArguments !== 'object') {\n        throw 'Expecting systemArguments to be of type object';\n      }\n\n      this.runSystems(systemArguments);\n      this.run(sysArgs); // the original\n    });\n  }\n\n  runSystems(systemArguments) {\n    for (let i = 0; i < this.systems.length; i++) {\n      this.systems[i](systemArguments);\n    }\n  }\n\n  stop() {\n    cancelAnimationFrame(this.frameID);\n  }\n}\n\n\nexport default Engine;","import Entity from 'lib/ECS/Entity';\nimport entityLoop from 'lib/ECS/util/entityLoop';\nimport ObjectPool from 'lib/ObjectPool/ObjectPool';\nimport GameCanvas from 'lib/GameCanvas/GameCanvas';\nimport Engine from 'lib/Engine/Engine';\n\nexport default {\n  Entity,\n  entityLoop,\n  ObjectPool,\n  GameCanvas,\n  Engine\n};"],"sourceRoot":""}